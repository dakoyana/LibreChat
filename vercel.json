{
  "version": 2,
  "installCommand": "npm ci --no-audit --prefer-offline",
  "buildCommand": "NODE_OPTIONS=\"--max-old-space-size=2048\" npm run -w LibreChat frontend:ci",
  "outputDirectory": "client/dist",
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "https://librechat-production-dce3.up.railway.app/api/:path*"
    },
    {
      "source": "/socket.io/:path*",
      "destination": "https://librechat-production-dce3.up.railway.app/socket.io/:path*"
    },
    {
      "source": "/images/:path*",
      "destination": "https://librechat-production-dce3.up.railway.app/images/:path*"
    },
    {
      "source": "/uploads/:path*",
      "destination": "https://librechat-production-dce3.up.railway.app/uploads/:path*"
    },
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ],
  "ignoreCommand": "if [ \"$VERCEL_ENV\" = \"production\" ] && [ \"$VERCEL_GIT_COMMIT_REF\" != \"main\" ] && [ \"$VERCEL_GIT_COMMIT_REF\" != \"scl-ui\" ]; then echo \"Skipping prod build (branch must be main or scl-ui)\"; exit 0; else exit 1; fi"
}
